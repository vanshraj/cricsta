extends ../layout

block content
	.ui.centered.grid.center.aligned
			.column.center.aligned
				h1 #{data.team1.name} v/s #{data.team2.name}
				.ui.divider
	if !user
		.ui.grid.tablet.computer.only
			.ui.container.eight.wide.centered.column.center.aligned
				.ui.warning.message
					i.close.icon
					.header
					| Please  
					span
						a(style="text-decoration:underline" href="/users/register") register
					|  or 
					span
						a(style="text-decoration:underline" href="/users/login") login
					|  to play the game and see your account details.
				br
		.ui.mobile.only.grid.center.aligned
			.ui.container
				.ui.warning.message(style="font-size:12px")
					i.close.icon
					.header
					| Please  
					span
						a(style="text-decoration:underline" href="/users/register") register
					|  or 
					span
						a(style="text-decoration:underline" href="/users/login") login
					|  to play the game and see your account details.
				br
	.ui.container
		.ui.equal.width.grid.stackable
			if user
				.row
					.column
						.ui.card.orange(style="width:100%")
							.content
								.left.floated.header Account Details
								.right.floated.author
									img.ui.avatar.image(src='/images/matt.jpg')
									|  #{user.name}
								.left.floated.meta(style="clear:both;")
									span.category Virtual Money
								.description
									table.ui.very.basic.table
										tbody
											- var stocks=0
											tr
												td Cash Balance  
													i.info.circle.icon(style="font-size:0.7em", data-variation="wide inverted",data-content="Total money in your account.",data-position="top center")
												td.UserBalance(colspan="2") #{Math.round((user_data.balance))} Inr
											tr
												td Stocks 
													i.info.circle.icon(style="font-size:0.7em", data-variation="wide inverted",data-content="Money that is active supporting your holdings.",data-position="top center")
												td.UserStock(colspan="2") #{Math.round(stocks*100)} Inr
											tr
												td Profit/Loss 
													i.info.circle.icon(style="font-size:0.7em", data-variation="wide inverted",data-content="This is the net amount of profit/loss you have made in this match.",data-position="top center")
												td.UserProfit(colspan="2")(class= ( user_data.profit > 0 ? 'positive': ( user_data.profit < 0 ? 'negative': '') )) #{Math.round(user_data.profit)} Inr
						.ui.button.orange.mini.inverted.left.floated.odipoint ODI points system
						.ui.button.orange.mini.inverted.left.floated.t20point T20 points system
					.column
						.ui.top.attached.pointing.menu.stackable
							a.item.menuTabs.active(data-tab='first') Holdings
							a.item.menuTabs(data-tab='second') Closed Positions
						.ui.bottom.attached.tab.segment.active(data-tab='first')
							.ui.card.orange(style="width:100%")
								.content
									.left.floated.header Holdings 
										i.info.circle.icon(style="font-size:0.7em", data-variation="wide inverted",data-content="All your open positions.",data-position="top center")
									.description
										br
										table.ui.very.basic.table.BuyPositionTable
											thead
												tr
													th Players
													th Stocks
													th Current price
													th Buy price
													th Profit/Loss
											tbody.buyTBody
												each buy, i in user_data.buy
													tr
														td #{buy.name}
														td.boughtQty #{buy.quantity}
														td.currentPosition Something
														td.boughtPrice #{Math.round(buy.price)}
														td.currentProfit Something
										.NoBuyPosition
											br
											p No Open Positions.
						.ui.bottom.attached.tab.segment(data-tab='second')
							.ui.card.orange(style="width:100%")
								.content
									.left.floated.header Closed Positions 
										i.info.circle.icon(style="font-size:0.7em", data-variation="wide inverted",data-content="All your closed positions.",data-position="top center")
									.description
										br
										table.ui.very.basic.table.SellPositionTable
											thead
												tr
													th Players
													th Stocks
													th Sold price
													th Buy price
													th Profit/Loss
											tbody.sellTBody
												each sell, i in user_data.sell
													tr
														td #{sell.name}
														td #{sell.quantity}
														td Something
														td #{Math.round(sell.price)}
														td Something
										.NoSellPosition
											br
											p No Closed Positions.
			.row
				.column
					table.ui.selectable.celled.table.orange.unstackable.structured.small
						thead
							tr
								th #{data.team1.name} Players
								th(colspan="2") Current player points 
									i.help.circle.outline.icon(style="font-size:0.9em", data-variation="wide inverted",data-content="Price of buying the player.",data-position="top center")
						tbody
							if data.team1.batsmen
								each batsmen, i in team1players
									if (batsmen.runsScored)
										tr(p-name="#{batsmen.name}")
											td
												-var team1uri= encodeURIComponent(data.team1.name.trim())
												img(src="/images/#{team1uri}.png" style="vertical-align:middle; max-width:35px")
												| &nbsp #{batsmen.name}
												if (batsmen.keeper)
													img(src="/images/keeper.png" style="float:right; max-width:25px")
												else
													img(src="/images/bat.png" style="float:right; max-width:25px")
											td.currentPoints 
												p(style="display:block; float:right;") #{Math.round(batsmen.points)} Points	
											td 
												.ui.button.green.mini.inverted.left.floated.buyButton Buy
												.ui.button.red.mini.inverted.right.floated.sellButton Sell
									else
										tr(p-name="#{batsmen.name}")
											td
												-var team1uri= encodeURIComponent(data.team1.name.trim())
												img(src="/images/#{team1uri}.png" style="vertical-align:middle; max-width:35px")
												| &nbsp #{batsmen.name}
												img(src="/images/ball.png" style="float:right; margin-top:10px; max-width:15px")
											td.currentPoints
												p(style="display:block; float:right;") #{Math.round(batsmen.points)} Points
											td 
												.ui.button.green.mini.inverted.left.floated.buyButton Buy
												.ui.button.red.mini.inverted.right.floated.sellButton Sell
				.column
					table.ui.selectable.celled.table.orange.unstackable.structured.small
						thead
							tr
								th #{data.team2.name} Players
								th(colspan="2") Current player points 
									i.help.circle.outline.icon(style="font-size:0.9em", data-variation="wide inverted",data-content="Price of buying the player.",data-position="top center") 
						tbody
							if data.team2.batsmen
								each batsmen, i in team2players
									if batsmen.runsScored
										tr(p-name="#{batsmen.name}")
											td
												-var team2uri= encodeURIComponent(data.team2.name.trim())
												img(src="/images/#{team2uri}.png" style="vertical-align:middle; max-width:35px")
												| &nbsp #{batsmen.name}
												if (batsmen.keeper)
													img(src="/images/keeper.png" style="float:right; max-width:25px")
												else
													img(src="/images/bat.png" style="float:right; max-width:25px")
											td.currentPoints 
												p(style="display:block; float:right;") #{Math.round(batsmen.points)} Points	
											td 
												.ui.button.green.mini.inverted.left.floated.buyButton Buy
												.ui.button.red.mini.inverted.right.floated.sellButton Sell
									else
										tr(p-name="#{batsmen.name}")
											td
												-var team2uri= encodeURIComponent(data.team2.name.trim())
												img(src="/images/#{team2uri}.png" style="vertical-align:middle; max-width:35px")
												| &nbsp #{batsmen.name}
												img(src="/images/ball.png" style="float:right; margin-top:10px; max-width:15px")
											td.currentPoints 
												p(style="display:block; float:right;") #{Math.round(batsmen.points)} Points	
											td 
												.ui.button.green.mini.inverted.left.floated.buyButton Buy
												.ui.button.red.mini.inverted.right.floated.sellButton Sell
			.row
				.column
					table.ui.selectable.celled.table.orange.unstackable.structured
						thead
							tr
								th(colspan='3') Leadership Board
						thead
							tr
								th Rank
								th Player Name
								th Score
						tbody
							each player, i in alluser
								tr
									td=i+1
									td 
										img.ui.avatar.image(src='/images/matt.jpg')
										|  #{player.name}
									td #{Math.round(player.score)} Points
				.column
	.ui.odi.modal
		i.close.icon
		.header Odi Points System
		.scrolling.content
			.ui.equal.width.grid.stackable
				.column
					table.ui.striped.celled.table.orange.unstackable.structured.small
						thead
							tr
								th(colspan='2') Batting
								th Points
						tbody
							tr
								td(rowspan='7') Minimum 35 balls 
								td Runs
								td 1
							tr
								td S.R. below 65
								td -6
							tr
								td S.R. b/w 65 & 75
								td -4
							tr
								td S.R. b/w  75 & 95 
								td -2
							tr
								td S.R. b/w 95 & 105
								td 2
							tr
								td S.R. b/w 105 & 115
								td 4
							tr
								td S.R. above 115
								td 6
				.column
					table.ui.striped.celled.table.orange.unstackable.structured.small
						thead
							tr
								th(colspan='2') Bowling
								th Points
						tbody
							tr
								td(rowspan='7') Minimum 6 Overs
								td Wicket
								td 30
							tr
								td E.R above 8
								td -6
							tr
								td E.R. b/w 7 & 8
								td -4
							tr
								td E.R. b/w  6 & 7 
								td -2
							tr
								td E.R. b/w 4 & 5
								td 2
							tr
								td E.R. b/w 3 & 4
								td 4
							tr
								td E.R. below 3
								td 6
	.ui.t20.modal
		i.close.icon
		.header T20 Points System
		.scrolling.content
			.ui.equal.width.grid.stackable
				.column
					table.ui.striped.celled.table.orange.unstackable.structured.small
						thead
							tr
								th(colspan='2') Batting
								th Points
						tbody
							tr
								td(rowspan='7') Minimum 20 balls 
								td Runs
								td 1
							tr
								td S.R. below 105
								td -6
							tr
								td S.R. b/w 105 & 115
								td -4
							tr
								td S.R. b/w  115 & 125 
								td -2
							tr
								td S.R. b/w 135 & 145
								td 2
							tr
								td S.R. b/w 145 & 155
								td 4
							tr
								td S.R. above 155
								td 6
				.column
					table.ui.striped.celled.table.orange.unstackable.structured.small
						thead
							tr
								th(colspan='2') Bowling
								th Points
						tbody
							tr
								td(rowspan='7') Minimum 3 Overs
								td Wicket
								td 20
							tr
								td E.R above 10
								td -6
							tr
								td E.R. b/w 9 & 10
								td -4
							tr
								td E.R. b/w  8 & 9 
								td -2
							tr
								td E.R. b/w 6 & 7
								td 2
							tr
								td E.R. b/w 5 & 6
								td 4
							tr
								td E.R. below 5
								td 6
	.ui.mini.buying.modal
		.header
		.content
			.description
				| Buying Stocks
			.ui.divider
			form.ui.form
				.fields
					.field
						label Stocks
						input(type='number', name='b-quantity',value='1',min='1' max='2' )
					.field
						label &nbsp
						input.ui.button.mini.primary.twiceButton(type='button',field='b-quantity', value='x2')
				.fields
					.field.bPrice
						label Price
						input(type='number', name='b-price', disabled)
			.ui.divider
			.description1
		.actions
			.ui.negative.left.labeled.icon.button
				| Cancel
				i.remove.icon
			.ui.positive.right.labeled.icon.button
				| Buy
				i.checkmark.icon

	.ui.mini.selling.modal
		.header
		.content
			.description
				| Selling Stocks
			.ui.divider
			form.ui.form
				.fields
					.field
						label Stocks
						input(type='number', name='s-quantity', value='1')
					.field
						label &nbsp
						input.ui.button.mini.primary.twiceButton(type='button',field='s-quantity', value='x2')
				.fields
					.field.sPrice
						label Points
						input(type='number', name='s-price', disabled )
			.ui.divider
			.description1
		.actions
			.ui.negative.left.labeled.icon.button
				| Cancel
				i.remove.icon
			.ui.positive.right.labeled.icon.button
				| Sell
				i.checkmark.icon
block scripts
	script(src="/javascripts/game.js")